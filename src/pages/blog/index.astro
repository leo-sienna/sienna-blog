---
import Layout from '../../layouts/Layout.astro';
import { getCollection } from 'astro:content';

const allPosts = await getCollection('blog');
const sortedPosts = allPosts.sort((a, b) => 
  new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()
);
---

<Layout title="Writing - Sienna">
  <main class="min-h-screen py-20 px-6">
    <div class="max-w-4xl mx-auto">
      <header class="mb-16">
        <a href="/" class="link text-apple-gray-600 mb-8 inline-block">
          ‚Üê Back to home
        </a>
        <h1 class="section-heading mb-6">Writing</h1>
        <p class="text-xl text-apple-gray-600 max-w-2xl">
          Thoughts on AI, design, technology, and personal growth. 
          Learning in public and documenting the journey.
        </p>
      </header>

      <div class="space-y-6">
        {sortedPosts.map((post) => (
          <article class="card hover:translate-y-[-2px]">
            <div class="flex flex-col md:flex-row md:items-start md:justify-between gap-4">
              <div class="flex-1">
                <div class="flex items-center gap-3 mb-2">
                  <span class="text-sm text-apple-gray-500">
                    {new Date(post.data.pubDate).toLocaleDateString('en-US', {
                      year: 'numeric',
                      month: 'long',
                      day: 'numeric'
                    })}
                  </span>
                  {post.data.tags && post.data.tags.length > 0 && (
                    <div class="flex gap-2">
                      {post.data.tags.map((tag) => (
                        <span class="px-2 py-0.5 text-xs bg-apple-gray-200 text-apple-gray-600 rounded">
                          {tag}
                        </span>
                      ))}
                    </div>
                  )}
                </div>
                <a href={`/blog/${post.slug}`}>
                  <h2 class="text-xl font-semibold text-apple-gray-900 hover:text-apple-blue transition-colors mb-2">
                    {post.data.title}
                  </h2>
                </a>
                <p class="text-apple-gray-600 line-clamp-2">
                  {post.data.description}
                </p>
              </div>
              <a 
                href={`/blog/${post.slug}`}
                class="shrink-0 text-apple-blue hover:text-apple-blue-light transition-colors"
              >
                Read more
              </a>
            </div>
          </article>
        ))}
      </div>
    </div>
  </main>
</Layout>
